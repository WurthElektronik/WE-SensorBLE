"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7078],{7078:(O,f,c)=>{c.r(f),c.d(f,{ScanTabModule:()=>Q,createTranslateLoader:()=>p});var s=c(5056),g=c(6895),m=c(4006),T=c(529),_=c(3652),h=c(9832),u=c(3196),r=c(5861),n=c(6738),b=c(9318);function v(e,a){1&e&&(n.TgZ(0,"div"),n._UZ(1,"ion-spinner",8),n.qZA())}function x(e,a){1&e&&n._UZ(0,"ion-icon",17)}function Z(e,a){1&e&&n._UZ(0,"ion-icon",18)}function S(e,a){1&e&&n._UZ(0,"ion-icon",19)}function y(e,a){1&e&&n._UZ(0,"ion-icon",20)}function I(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"ion-item",5),n.NdJ("click",function(){const l=n.CHM(i).$implicit,d=n.oxw(3);return n.KtG(d.scanitemclick(l))}),n.TgZ(1,"ion-label")(2,"ion-label",4),n._uU(3),n.qZA(),n.TgZ(4,"ion-label",10),n._uU(5),n.qZA()(),n.TgZ(6,"ion-label",11),n.YNc(7,x,1,0,"ion-icon",12),n.YNc(8,Z,1,0,"ion-icon",13),n.YNc(9,S,1,0,"ion-icon",14),n.YNc(10,y,1,0,"ion-icon",15),n.TgZ(11,"ion-label",16),n._uU(12),n.qZA()()()}if(2&e){const i=a.$implicit;n.xp6(3),n.Oqu(i.localName||"-"),n.xp6(2),n.Oqu(i.device.deviceId),n.xp6(2),n.Q6J("ngIf",i.rssi>-60),n.xp6(1),n.Q6J("ngIf",i.rssi>-70&&i.rssi<=-60),n.xp6(1),n.Q6J("ngIf",i.rssi>-80&&i.rssi<=-70),n.xp6(1),n.Q6J("ngIf",i.rssi<=-80),n.xp6(2),n.Oqu(i.rssi)}}function J(e,a){if(1&e&&(n.TgZ(0,"ion-list"),n.YNc(1,I,13,7,"ion-item",9),n.qZA()),2&e){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.scanresults)}}function Y(e,a){if(1&e&&(n.ynx(0),n.YNc(1,J,2,1,"ion-list",7),n.BQk()),2&e){const i=n.oxw();n.xp6(1),n.Q6J("ngIf",0!=i.scanresults.length)}}function A(e,a){if(1&e){const i=n.EpF();n.TgZ(0,"ion-list")(1,"ion-item",5),n.NdJ("click",function(){n.CHM(i);const o=n.oxw(2);return n.KtG(o.paireddeviceclick(o.paireddevice))}),n.TgZ(2,"ion-label")(3,"ion-label",4),n._uU(4),n.qZA(),n.TgZ(5,"ion-label",10),n._uU(6),n.qZA()()()()}if(2&e){const i=n.oxw(2);n.xp6(4),n.Oqu(i.paireddevice.name||"-"),n.xp6(2),n.Oqu(i.paireddevice.deviceId)}}function N(e,a){if(1&e&&(n.ynx(0),n.YNc(1,A,7,2,"ion-list",7),n.BQk()),2&e){const i=n.oxw();n.xp6(1),n.Q6J("ngIf",null!=i.paireddevice)}}const k=[{path:"",component:(()=>{class e{constructor(i,t,o,l,d,w){this.ble=i,this.ngZone=t,this.router=o,this.loadingCtrl=l,this.platform=d,this.translateService=w,this.scanning=!1,this.scantext="startscantext",this.scanresults=[],this.paireddevice=void 0}ngOnInit(){var i=this;return(0,r.Z)(function*(){yield i.ble.initializeble()})()}ionViewDidEnter(){this.scanning=!1,this.scantext="startscantext"}ionViewDidLeave(){var i=this;return(0,r.Z)(function*(){i.platform.is("desktop")||i.stopscan()})()}scanclick(){this.scanning?this.stopscan():this.scan()}scan(){var i=this;return(0,r.Z)(function*(){i.scanning=!0,i.scantext="stopscantext",i.scanresults=[],i.paireddevice=void 0,i.platform.is("desktop")?i.ble.requestdevice(t=>{i.paireddevice=t,i.stopscan()}):i.ble.startscan(t=>{(null==t.manufacturerData||i.ble.checkmanufacturerdata(t.manufacturerData[794]))&&i.ngZone.run(()=>{i.scanresults.push(t)})})})()}stopscan(){var i=this;return(0,r.Z)(function*(){i.scanning=!1,i.scantext="startscantext",i.platform.is("desktop")||(yield i.ble.stopscan())})()}scanitemclick(i){var t=this;return(0,r.Z)(function*(){t.router.navigate(["/tabs/featherwing"],{queryParams:{deviceid:i.device.deviceId}}),(yield t.loadingCtrl.create({message:"Connecting",spinner:"crescent"})).present()})()}paireddeviceclick(i){var t=this;return(0,r.Z)(function*(){t.router.navigate(["/tabs/featherwing"],{queryParams:{deviceid:i.deviceId}}),t.translateService.get("ScanTab.connecting").subscribe(function(){var o=(0,r.Z)(function*(l){(yield t.loadingCtrl.create({message:l,spinner:"crescent"})).present()});return function(l){return o.apply(this,arguments)}}())})()}refresh(i){var t=this;return(0,r.Z)(function*(){i.target.complete(),setTimeout((0,r.Z)(function*(){yield t.scan()}),250)})()}}return e.\u0275fac=function(i){return new(i||e)(n.Y36(b.x),n.Y36(n.R0b),n.Y36(u.F0),n.Y36(s.HT),n.Y36(s.t4),n.Y36(_.sK))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-scantab"]],decls:19,vars:11,consts:[[3,"translucent"],["color","primary"],["slot","fixed",3,"disabled","ionRefresh"],[1,"ion-text-center","ion-align-items-center","scanheader"],[2,"font-weight","bold"],[3,"click"],["fill","clear"],[4,"ngIf"],["name","crescent","color","primary",1,"block"],[3,"click",4,"ngFor","ngForOf"],["color","medium",1,"deviceid"],[1,"itemwrapnogrow","ion-text-end"],["class","barsredcolor","size","small","src","assets/ic_signal/ic_signal_full.svg",4,"ngIf"],["class","barsredcolor","size","small","src","assets/ic_signal/ic_signal_3.svg",4,"ngIf"],["class","barsredcolor","size","small","src","assets/ic_signal/ic_signal_2.svg",4,"ngIf"],["class","barsredcolor","size","small","src","assets/ic_signal/ic_signal_1.svg",4,"ngIf"],["color","medium"],["size","small","src","assets/ic_signal/ic_signal_full.svg",1,"barsredcolor"],["size","small","src","assets/ic_signal/ic_signal_3.svg",1,"barsredcolor"],["size","small","src","assets/ic_signal/ic_signal_2.svg",1,"barsredcolor"],["size","small","src","assets/ic_signal/ic_signal_1.svg",1,"barsredcolor"]],template:function(i,t){1&i&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),n._uU(3),n.ALo(4,"translate"),n.qZA()()(),n.TgZ(5,"ion-content")(6,"ion-refresher",2),n.NdJ("ionRefresh",function(l){return t.refresh(l)}),n._UZ(7,"ion-refresher-content"),n.qZA(),n.TgZ(8,"ion-grid")(9,"ion-row",3)(10,"ion-col",4),n._uU(11," Sensor FeatherWings "),n.qZA(),n.TgZ(12,"ion-col",5),n.NdJ("click",function(){return t.scanclick()}),n.TgZ(13,"ion-button",6),n._uU(14),n.ALo(15,"translate"),n.qZA(),n.YNc(16,v,2,0,"div",7),n.qZA()()(),n.YNc(17,Y,2,1,"ng-container",7),n.YNc(18,N,2,1,"ng-container",7),n.qZA()),2&i&&(n.Q6J("translucent",!1),n.xp6(3),n.hij(" ",n.lcZ(4,7,"ScanTab.tabname")," "),n.xp6(3),n.Q6J("disabled",1==t.scanning),n.xp6(8),n.Oqu(n.lcZ(15,9,"ScanTab."+t.scantext)),n.xp6(2),n.Q6J("ngIf",t.scanning),n.xp6(1),n.Q6J("ngIf",0==t.platform.is("desktop")),n.xp6(1),n.Q6J("ngIf",1==t.platform.is("desktop")))},dependencies:[s.YG,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Ie,s.Q$,s.q_,s.nJ,s.Wo,s.Nd,s.PQ,s.wd,s.sr,g.sg,g.O5,_.X$],styles:[".scanheader[_ngcontent-%COMP%]{height:100px}.barsredcolor[_ngcontent-%COMP%]{filter:invert(12%) sepia(84%) saturate(7193%) hue-rotate(353deg) brightness(86%) contrast(110%)}.ios[_ngcontent-%COMP%]   .deviceid[_ngcontent-%COMP%]{font-size:small}"]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[u.Bz.forChild(k),u.Bz]}),e})();function p(e){return new h.w(e,"./assets/i18n/",".json")}let Q=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[s.Pc,g.ez,m.u5,C,_.aw.forChild({loader:{provide:_.Zw,useFactory:p,deps:[T.eN]}})]}),e})()}}]);